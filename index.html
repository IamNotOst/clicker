<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>ComsicClicker</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --bg: #0d0f14;
      --fg: #e0e8f8;
      --accent: #7f8cf4;
      --glow: rgba(127, 140, 244, 0.6);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body, html { width: 100%; height: 100%; overflow: hidden; background: var(--bg); color: var(--fg); font-family: 'Segoe UI', sans-serif; }
    .container { display: flex; flex-direction: column; height: 100vh; }
    nav { display: flex; justify-content: space-around; background: #13151b; box-shadow: 0 0 20px var(--glow); }
    nav button { flex:1; padding: 10px; background: transparent; border:none; color: var(--fg); font-size: 1rem; cursor: pointer; transition: background .3s; }
    nav button.active, nav button:hover { background: var(--accent); }
    main { flex:1; padding:15px; overflow-y: auto; }
    .hidden { display: none; }
    .clicker { display: flex; flex-direction: column; align-items:center; justify-content:center; height:100%; }
    .click-btn { width: 150px; height: 150px; border-radius: 50%; background: var(--accent); border: none; box-shadow: 0 0 30px var(--glow); font-size: 2rem; color: var(--bg); cursor: pointer; transition: transform .2s, box-shadow .2s;
                animation: pulse 2s infinite ease-in-out;
    }
    .click-btn:active { transform: scale(0.95); box-shadow: 0 0 10px var(--glow); }
    @keyframes pulse { 0%,100% { box-shadow:0 0 30px var(--glow);}50%{box-shadow:0 0 15px var(--glow);} }
    .stats { margin-top:20px; font-size:1.2rem; text-align:center; }
    .shop, .promo, .leaderboard { display: flex; flex-direction: column; gap:10px; }
    .item { display:flex; justify-content: space-between; padding:10px; background: #13151b; border-radius:8px; box-shadow:0 0 10px var(--glow); transition:transform .2s; }
    .item:hover { transform: scale(1.02); }
    /* Responsive */
    @media (max-width: 320px) { .click-btn { width:120px; height:120px; font-size:1.5rem; } }
  </style>
</head>
<body>
  <div class="container">
    <nav>
      <button data-tab="play" class="active">Play</button>
      <button data-tab="shop">Shop</button>
      <button data-tab="promo">Promo</button>
      <button data-tab="leaderboard">Top 10</button>
    </nav>
    <main>
      <section id="play" class="clicker">
        <button id="clickBtn" class="click-btn">+1</button>
        <div class="stats">
          <div>Points: <span id="points">0</span></div>
          <div>Click Value: <span id="perClick">1</span></div>
          <div id="bonusTimer"></div>
        </div>
      </section>
      <section id="shop" class="shop hidden"></section>
      <section id="promo" class="promo hidden">
        <input type="text" id="promoInput" placeholder="Enter code" style="padding:8px;border-radius:5px;border:none;outline:none;width:100%;margin-bottom:10px;">
        <button id="promoBtn" style="padding:10px;border:none;border-radius:5px;background:var(--accent);color:var(--bg);cursor:pointer;">Activate</button>
        <div id="promoMsg" style="margin-top:10px"></div>
      </section>
      <section id="leaderboard" class="leaderboard hidden"></section>
    </main>
  </div>
  <script>
  // State & Storage
  const state = {points:0, perClick:1, clicks:0, superActive:false};
  const promoCodes = { COSMIC100:1000, BOOST: state.points + 500 };
  const usedPromo = {};
  let leaderboard = JSON.parse(localStorage.getItem('leader'))||[];
  function save() { localStorage.setItem('cosmic', JSON.stringify(state)); localStorage.setItem('leader', JSON.stringify(leaderboard)); }
  function load() { Object.assign(state, JSON.parse(localStorage.getItem('cosmic'))||{}); updateStats(); }
  load();
  // Tabs
  document.querySelectorAll('nav button').forEach(btn=>btn.onclick=()=>{
    document.querySelectorAll('main section').forEach(s=>s.classList.add('hidden'));
    document.getElementById(btn.dataset.tab).classList.remove('hidden');
    document.querySelector('nav button.active').classList.remove('active');
    btn.classList.add('active');
    if(btn.dataset.tab==='shop') renderShop();
    if(btn.dataset.tab==='leaderboard') renderLeader();
  });
  // Click
  document.getElementById('clickBtn').onclick=()=>{
    state.points += state.perClick; state.clicks++; updateStats(); animateClick(); save();
  };
  function updateStats(){ document.getElementById('points').innerText=state.points; document.getElementById('perClick').innerText=state.perClick; }
  function animateClick(){ const c=document.createElement('div'); c.innerText='+'+state.perClick; Object.assign(c.style,{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%,-50%)',color:var('--accent'),pointerEvents:'none',transition:'opacity 1s, transform 1s'}); document.body.append(c); setTimeout(()=>{c.style.opacity=0; c.style.transform='translate(-50%,-150%)';},50); setTimeout(()=>c.remove(),1050); }
  // Shop
  const shopItems=[{name:'Power+', get cost(){return state.perClick*100}, action:()=>{ state.perClick++; }}, {name:'SuperClick x2', cost:2000, action:activateSuper}];
  function renderShop(){ const shop=document.getElementById('shop'); shop.innerHTML=''; shopItems.forEach((i,idx)=>{ const el=document.createElement('div'); el.className='item'; el.innerHTML=`<span>${i.name}</span><span>${i.cost} pts</span>`; el.onclick=()=>{ if(state.points>=i.cost){ state.points-=i.cost; i.action(); save(); renderShop(); updateStats(); } }; shop.append(el);}); }
  // Super
  let timerId;
  function activateSuper(){ if(state.superActive) return; state.superActive=true; state.perClick*=2; let t=15; showTimer(t); timerId=setInterval(()=>{ if(--t<=0){ clearInterval(timerId); state.superActive=false; state.perClick/=2; document.getElementById('bonusTimer').innerText=''; updateStats(); save(); } else showTimer(t); },1000); }
  function showTimer(t){ document.getElementById('bonusTimer').innerText='Super x2: '+t+'s'; }
  // Promo
  document.getElementById('promoBtn').onclick=()=>{ const code=document.getElementById('promoInput').value.trim().toUpperCase(); const msg=document.getElementById('promoMsg'); if(!promoCodes[code]) msg.innerText='Code not found'; else if(usedPromo[code]) msg.innerText='Already used'; else{ state.points=promoCodes[code]; usedPromo[code]=true; save(); updateStats(); msg.innerText='Activated!'} };
  // Leaderboard
  function renderLeader(){ const lb=document.getElementById('leaderboard'); lb.innerHTML=''; const entry={pts:state.points, clicks:state.clicks}; leaderboard.push(entry); leaderboard.sort((a,b)=>b.pts-a.pts); leaderboard=leaderboard.slice(0,10); leaderboard.forEach((e,i)=>{ const r=document.createElement('div'); r.className='item'; r.innerHTML=`<span>#${i+1}</span><span>${e.pts} pts / ${e.clicks} clicks</span>`; lb.append(r); }); save(); }
  // Telegram init
  Telegram.WebApp.ready();
  </script>
</body>
</html>
